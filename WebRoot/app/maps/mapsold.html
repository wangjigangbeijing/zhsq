
<!--script src="../plugins/ol5/ol.js">

<script type="text/javascript" src="./maps/include-web.js"></script>
<script type="text/javascript" src="../plugins/iclient/ol/include-ol.js"></script-->

	
	
	

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>社区大地图</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">ChartJS</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-6">
            <!-- AREA CHART -->
            <div class="card card-primary">
              <div class="card-header">
                <h3 class="card-title">社区民情图</h3>

                <div class="card-tools">
                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                </div>
              </div>
              <div class="card-body" id="sqmqtDiv" style="height:300px;">
               
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->

            <!-- DONUT CHART -->
            <div class="card card-danger">
              <div class="card-header">
                <h3 class="card-title">平安建设图</h3>

                <div class="card-tools">
                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                </div>
              </div>
              <div class="card-body" id="pajstDiv" style="height:300px;">
                
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->

            <!-- PIE CHART -->
            <div class="card card-danger">
              <div class="card-header">
                <h3 class="card-title">文教体育图</h3>

                <div class="card-tools">
                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                </div>
              </div>
              <div class="card-body" id="wjtytDiv" style="height:300px;">
                <canvas id="pieChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->

          </div>
          <!-- /.col (LEFT) -->
          <div class="col-md-6">
            <!-- LINE CHART -->
            <div class="card card-info">
              <div class="card-header">
                <h3 class="card-title">先锋党建图</h3>

                <div class="card-tools">
                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                </div>
              </div>
              <div class="card-body" id="xfdjtDiv" style="height:300px;">
                <div class="chart">
                  <canvas id="lineChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                </div>
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->

            <!-- BAR CHART -->
            <div class="card card-success">
              <div class="card-header">
                <h3 class="card-title">社区服务图</h3>

                <div class="card-tools">
                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                </div>
              </div>
              <div class="card-body" id="sqfwtDiv" style="height:300px;">
                <div class="chart">
                  <canvas id="barChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                </div>
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->

            <!-- STACKED BAR CHART -->
            <div class="card card-success">
              <div class="card-header">
                <h3 class="card-title">环境卫生图</h3>

                <div class="card-tools">
                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                </div>
              </div>
              <div class="card-body" id="hjwstDiv" style="height:300px;">
                <div class="chart">
                  <canvas id="stackedBarChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                </div>
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->

          </div>
          <!-- /.col (RIGHT) -->
        </div>
        <!-- /.row -->
      </div><!-- /.container-fluid -->
    </section>
    

<!-- ChartJS>
<script src="./plugins/chart.js/Chart.min.js"></script -->



<!-- page script -->
<script>
  $(function () {
  
	
	var sqmqt = new ol.Map({
        target: 'sqmqtDiv',
        //controls: ol.control.defaults({attributionOptions: {collapsed: false}})
        //    .extend([new ol.supermap.control.Logo()]),
        view: new ol.View({
            center: [12965554.49 , 4903893.99],
            zoom: 12,
            //projection: 'EPSG:4326',
			projection: 'EPSG:3857',
            multiWorld: true
        })/*,
        overlays: [overlay]*/
    });
    
	var pajst = new ol.Map({
        target: 'pajstDiv',
        view: new ol.View({
            center: [12965554.49 , 4903893.99],
            zoom: 12,
			projection: 'EPSG:3857',
            multiWorld: true
        })
    });
	/*
	var wjtyt = new ol.Map({
        target: 'wjtytDiv',
        view: new ol.View({
            center: [12965554.49 , 4903893.99],
            zoom: 12,
			projection: 'EPSG:3857',
            multiWorld: true
        })
    });
	
	var xfdjt = new ol.Map({
        target: 'xfdjtDiv',
        view: new ol.View({
            center: [12965554.49 , 4903893.99],
            zoom: 12,
			projection: 'EPSG:3857',
            multiWorld: true
        })
    });

	var sqfwt = new ol.Map({
        target: 'sqfwtDiv',
        view: new ol.View({
            center: [12965554.49 , 4903893.99],
            zoom: 12,
			projection: 'EPSG:3857',
            multiWorld: true
        })
    });

	var hjwst = new ol.Map({
        target: 'hjwstDiv',
        view: new ol.View({
            center: [12965554.49 , 4903893.99],
            zoom: 12,
			projection: 'EPSG:3857',
            multiWorld: true
        })
    });

	*/



	/*var layer = new ol.layer.Tile({
        source: new ol.source.TileSuperMapRest({
            url: "https://iserver.supermap.io/iserver/services/map-world/rest/maps/World"
        })
    });
    map.addLayer(layer);*/


	var sqmqtlayer = new ol.layer.Tile({
        source: new ol.source.TileSuperMapRest({
            url: "http://219.143.76.46:8089/iserver/services/map-agscache-fengtai/rest/maps/fengtai"
        })
    });
    sqmqt.addLayer(sqmqtlayer);
	
	var pajstlayer = new ol.layer.Tile({
        source: new ol.source.TileSuperMapRest({
            url: "http://219.143.76.46:8089/iserver/services/map-agscache-fengtai/rest/maps/fengtai"
        })
    });
	pajst.addLayer(pajstlayer);
	/*wjtyt.addLayer(layer);
	xfdjt.addLayer(layer);
	sqfwt.addLayer(layer);
	hjwst.addLayer(layer);
	*/
	//map.getView().fit(bounds, map.getSize());
	
	/*layer = new ol.layer.Image({
		source: new ol.source.ImageWMS({
		  ratio: 1,
		  url: 'http://219.143.76.46:8089/iserver/services/map-agscache-fengtai/rest/maps/fengtai',
		  params: {'FORMAT': 'image/png',
				   'VERSION': '1.1.1',  
				"STYLES": 'dt_green',
				"LAYERS": workspace+':'+baseLayerName,
				"exceptions": 'application/vnd.ogc.se_inimage',
		  }
		})
	  });

	map.addLayer(layer);*/
	/*
	map.on('singleclick', function(evt) 
	{
		var feature = map.forEachFeatureAtPixel(evt.pixel,
			function(feature) {
			
				return feature;
		});
			
		if(feature != null && feature != undefined)
		{
			var gid = feature.getId();
			
			curId = gid.substring(gid.indexOf('\.')+1);
			
			$.get(getContextPath()+"/dataController/getData?projectId="+curProjectId+"&layerId="+curLayerId+"&dataId="+curId,
			function(dataDetail)
			{										
				$('#imgList').empty();
				
				curData = jQuery.parseJSON(dataDetail);  
				
				for(var i=attributeList.length - 1;i>=0 ;i--)
				{
					$('#'+attributeList[i].enName).val(curData[attributeList[i].enName]);
					
					if(attributeList[i].componentsType == '下拉' || attributeList[i].componentsType == '数字' 
							|| attributeList[i].componentsType == '单行文本' || attributeList[i].componentsType == '多行文本')
					{
						if(curData[attributeList[i].enName] == null)
							$('#'+attributeList[i].enName).val('');
						else
							$('#'+attributeList[i].enName).val(curData[attributeList[i].enName]);
					}
					else if(attributeList[i].componentsType == '单选')
					{
						$("input[name='"+attributeList[i].enName+"'][value='"+curData[attributeList[i].enName]+"']").attr('checked','true');
					}
					else if(attributeList[i].componentsType == '多选')
					{
						var checkArr = curData[attributeList[i].enName].split(VALUE_SPLITTER);
						
						for(var j=0;j<checkArr.length;j++)
						{
							if(curData[attributeList[i].enName] == null)
								$("input[name='"+attributeList[i].enName+"'][value='"+checkArr[j]+"']").attr('checked','false');
							else
							{
								if(checkArr[j] != '')
								{
									$("input[name='"+attributeList[i].enName+"'][value='"+checkArr[j]+"']").attr('checked','true');
								}
							}
						}
					}
					else if(attributeList[i].componentsType == '图片' || attributeList[i].componentsType == '文件')
					{
						$('#'+attributeList[i].enName+'picktable').dataTable({searching:false,paging:false,info:false}).fnClearTable();
						
						if(curData[attributeList[i].enName] != null)
						{
							var fjArr = curData[attributeList[i].enName].split(VALUE_SPLITTER);
								
							for(var j=0;j<fjArr.length;j++)
							{
								if(fjArr[j] != '')
								{
									var fileName = fjArr[j].substring(fjArr[j].lastIndexOf('/')+1);
									
									$('#'+attributeList[i].enName+'picktable').dataTable({searching:false,paging:false,info:false}).fnAddData(
										[fileName,'已提交','<button type="button" class="btn btn-success btn-xs" onclick="javascript:downloadAttach(\''+fileName+'\');return false;"><i class="fa fa-check"></i></button><button type="button" class="btn btn-danger btn-xs" onclick="javascript:deleteAttach(\''+attributeList[i].enName+'picktable\',\''+fileName+'\');return false;"><i class="fa fa-trash-o"></i></button>']
									);		
									
									var fileURL = getContextPath()+"/fileController/imagePreview?projectId="+curProjectId+"&layerId="+curLayerId+"&fileName="+fileName;
									
									var file = '<li>                                                                               '+
											'	<figure>                                                                           '+
											'		  <img src="'+fileURL+'" alt="img06">                                    	   '+
											'		  <figcaption>                                                                 '+
											'			  <h3>'+fileName+'</h3>                                                    '+
											'		  </figcaption>                                                                '+
											'	  </figure>                                                                        '+
											' </li>                                                                                ';
									
									$('#imgList').append(file);
								}
							}	
						}
					}
				}
			});
		}
	});
	*/
	
	
  })
</script>
</body>
</html>
